<div class="row" >
  <div class="col-xs-12 "> 
    <div class="row page-header">
      <div class="col-xs-5">
        <span class="headerTitle">alarms</span>
        </div><div class="col-xs-7" >
        <%= link_to "create new", new_alarm_path %>
    </div>
  </div>
  <div class="col-xs-4"> </div>

</div>

<div class="row" >
  <!-- create new alarm panel -->

  </div>
  <div class="col-xs-12">
    <div class="row alarm_list">

      <div class="col-xs-12">

        <% if @alarms.present? %>
          <% @alarms.each do |alarm| %>

            <!-- alarm item -->
            <div class="row alarm_box">
              <div class="col-xs-3 alarm_type_background">

                <div class="row">
                  <div class="col-xs-12">
                    <div class="alarm_type">
                      <%  if alarm.wakeup_reminder_type == 'call' %>
                        <span class="glyphicon glyphicon-earphone"></span><br><span class="alarm_type_text">Phone</span>
                      <% else %>
                        <span class="glyphicon glyphicon-envelope"></span><br><span class="alarm_type_text">SMS</span>
                      <% end %>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-12">
                      <div class="onoffswitch">
                        <%= check_box_tag "onoffswitch",  "on" , alarm.is_dismiss == "on", :class => "onoffswitch-checkbox", :id => "myonoffswitch#{alarm.id}", "data-url" => toggle_alarm_path(alarm) %>
                        
                        <label class="onoffswitch-label" for="myonoffswitch<%= alarm.id %>">
                            <div class="onoffswitch-inner"></div>
                            <div class="onoffswitch-switch"></div>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xs-8 alarm_content">
                <div class="alarm_title"> <%= alarm.title %> </div>
                <div class="alarm_time"> <%= alarm.wakeup_hour%>:<%= alarm.wakeup_minute %> <%= alarm.wakeup_ampm  %> </div>
                <div class="dayofweeks">
                  <span class="alarm_day <%= (alarm.repeat_sunday == '1')? "day_active"  :  "day_non_active"%>">SUN</span>
                  <span class="alarm_day <%= (alarm.repeat_monday == '1')? "day_active"  :  "day_non_active"%>">MON</span>
                  <span class="alarm_day <%= (alarm.repeat_tuesday == '1')? "day_active"  :  "day_non_active"%>">TUE</span>
                  <span class="alarm_day <%= (alarm.repeat_wednesday == '1')? "day_active"  :  "day_non_active"%>">WED</span>
                  <span class="alarm_day <%= (alarm.repeat_thursday == '1')? "day_active"  :  "day_non_active"%>">THU</span>
                  <span class="alarm_day <%= (alarm.repeat_friday == '1')? "day_active"  :  "day_non_active"%>">FRI</span>
                  <span class="alarm_day <%= (alarm.repeat_saturday == '1')? "day_active"  :  "day_non_active"%>">SAT</span>
                </div><br>

                <% if alarm.sleep_reminder_time != '0' %>
                  <%  if alarm.sleep_reminder_type == 'call' %>
                    <span class="glyphicon glyphicon-earphone"></span><span class="reminder_text"> <%= alarm.sleep_reminder_time %> <%=alarm.sleep_reminder_time_unit %> before</span>
                  <% else %>
                    <span class="glyphicon glyphicon-envelope"></span><span class="reminder_text"> <%= alarm.sleep_reminder_time %> <%=alarm.sleep_reminder_time_unit %> before</span>
                  <% end %>
                <% else %>
                  <span class="reminder_text">No reminder</span>
                <% end %>
              </div>
              <div class="col-xs-1 alarm_content">
                <%= link_to alarm, confirm: 'Are you sure?', disable_with: 'deleting...', method: :delete, class: 'btn btn-danger btn-xs' do %>
                  <span class=" glyphicon glyphicon-remove small_font"></span><% end %><br><br><br><br>


                <a data-toggle="modal" href="/alarms/<%= alarm.id %>/edit" data-target="#editAlarm" class="btn btn-warning btn-xs"><span class="glyphicon glyphicon-pencil small_font"></span></a>
              </div>
            </div>
          <%end%>
        <% else %>
        <% end %>  
      </div>
    </div>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="editAlarm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Edit</h4>

      </div>
      <div class="modal-body"><div class="te"></div></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->


<div class="modal fade" id="addAlarm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Loading ....</h4>

      </div>
      <div class="modal-body"><div class="te"></div></div>
      <div class="modal-footer">
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
